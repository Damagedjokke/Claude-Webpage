<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystic Realm - Your Fantasy Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a0933 0%, #2d1b4e 50%, #1a0933 100%);
            color: #e0d4f7;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
        }

        h1 {
            font-size: 3.5em;
            color: #ffd700;
            text-shadow: 0 0 20px #ffd700, 0 0 40px #ff8c00;
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px #ffd700, 0 0 40px #ff8c00; }
            50% { text-shadow: 0 0 30px #ffd700, 0 0 60px #ff8c00, 0 0 80px #ffd700; }
        }

        .subtitle {
            font-size: 1.3em;
            color: #b8a8d8;
            font-style: italic;
        }

        .magic-section {
            background: rgba(45, 27, 78, 0.6);
            border: 2px solid #8b5cf6;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.3);
            backdrop-filter: blur(10px);
        }

        h2 {
            color: #a78bfa;
            margin-bottom: 20px;
            font-size: 2em;
            text-align: center;
        }

        .spell-casting {
            text-align: center;
            padding: 20px;
        }

        .spell-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .spell-btn {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
            font-family: 'Georgia', serif;
        }

        .spell-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 25px rgba(139, 92, 246, 0.6);
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
        }

        .spell-btn:active {
            transform: scale(0.95);
        }

        #spell-result {
            min-height: 60px;
            margin-top: 20px;
            font-size: 1.3em;
            color: #ffd700;
            text-shadow: 0 0 10px #ffd700;
        }

        .crystal-game {
            text-align: center;
        }

        .crystals-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .crystal {
            width: 60px;
            height: 60px;
            cursor: pointer;
            transition: all 0.3s;
            filter: drop-shadow(0 0 10px currentColor);
        }

        .crystal:hover {
            transform: scale(1.2) rotate(10deg);
        }

        .score {
            font-size: 1.5em;
            color: #ffd700;
            margin: 20px 0;
        }

        .portal {
            width: 200px;
            height: 200px;
            margin: 30px auto;
            border-radius: 50%;
            background: radial-gradient(circle, #8b5cf6 0%, #2d1b4e 70%);
            border: 3px solid #a78bfa;
            animation: portal-spin 10s linear infinite;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 40px rgba(139, 92, 246, 0.8), inset 0 0 40px rgba(139, 92, 246, 0.5);
        }

        .portal:hover {
            transform: scale(1.1);
            box-shadow: 0 0 60px rgba(139, 92, 246, 1), inset 0 0 60px rgba(139, 92, 246, 0.7);
        }

        @keyframes portal-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        #portal-message {
            text-align: center;
            font-size: 1.2em;
            color: #a78bfa;
            margin-top: 20px;
            min-height: 30px;
        }

        .quest-list {
            list-style: none;
            margin-top: 20px;
        }

        .quest-item {
            background: rgba(139, 92, 246, 0.2);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #8b5cf6;
            transition: all 0.3s;
        }

        .quest-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
            border-left-color: #10b981;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #b8a8d8;
            font-style: italic;
        }

        .particle {
            position: fixed;
            pointer-events: none;
            animation: float-up 3s ease-out forwards;
        }

        @keyframes float-up {
            to {
                transform: translateY(-100vh) scale(0);
                opacity: 0;
            }
        }

        #story-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 999;
            animation: fadeIn 0.3s ease-in;
        }

        #story-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(26, 9, 51, 0.98);
            border: 3px solid #ffd700;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            z-index: 1000;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.6);
            animation: popIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes popIn {
            from {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        #story-title {
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
            font-size: 2em;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        #story-text {
            line-height: 1.8;
            font-size: 1.1em;
            text-align: center;
            margin-bottom: 10px;
            color: #e0d4f7;
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div id="story-overlay" onclick="closeStory()"></div>
    <div id="story-popup">
        <h3 id="story-title"></h3>
        <p id="story-text"></p>
        <button class="spell-btn" onclick="closeStory()" style="margin-top: 30px; display: block; margin-left: auto; margin-right: auto;">Continue Your Journey</button>
    </div>
    
    <div class="container">
        <header>
            <h1>‚öîÔ∏è Mystic Realm ‚öîÔ∏è</h1>
            <p class="subtitle">Welcome, Wanderer of the Arcane</p>
        </header>

        <section class="magic-section" id="intro-section">
            <h2>üìñ Your Journey Begins</h2>
            <div style="text-align: center; line-height: 1.8; font-size: 1.1em;">
                <p style="margin-bottom: 15px;">
                    You awaken in a realm forgotten by time, where magic pulses through the very air you breathe. 
                    The ancient Crystal Guardians have summoned you for a purpose long foretold in prophecy.
                </p>
                <p style="margin-bottom: 15px;">
                    The realm's magic is fading, and only by completing the trials of the four elements 
                    can balance be restored. Each quest you complete will reveal another fragment of the truth.
                </p>
                <p style="color: #ffd700; font-style: italic;">
                    Your destiny awaits, brave wanderer. Will you answer the call?
                </p>
                <button class="spell-btn" onclick="startJourney()" style="margin-top: 20px;">
                    Begin Your Quest
                </button>
            </div>
        </section>

        <section class="magic-section quest-content" style="display: none;">
            <h2>üìú Quest Board</h2>
            <div style="text-align: center; margin-bottom: 20px;">
                <div class="score">Quests Completed: <span id="quest-progress">0/5</span></div>
            </div>
            <ul class="quest-list">
                <li class="quest-item" id="quest-0">
                    <strong>Quest I:</strong> Master the Art of Spellcasting
                    <div style="font-size: 0.9em; color: #b8a8d8; margin-top: 5px;">Cast all four elemental spells to prove your magical prowess</div>
                </li>
                <li class="quest-item" id="quest-1">
                    <strong>Quest II:</strong> Gather the Crystal Shards
                    <div style="font-size: 0.9em; color: #b8a8d8; margin-top: 5px;">Collect 10 mystical crystals scattered throughout the realm</div>
                </li>
                <li class="quest-item" id="quest-2">
                    <strong>Quest III:</strong> Journey Through the Portal
                    <div style="font-size: 0.9em; color: #b8a8d8; margin-top: 5px;">Travel through the portal 3 times to explore distant realms</div>
                </li>
                <li class="quest-item" id="quest-3">
                    <strong>Quest IV:</strong> Embrace the Elements
                    <div style="font-size: 0.9em; color: #b8a8d8; margin-top: 5px;">Cast 20 spells total to channel the elemental forces</div>
                </li>
                <li class="quest-item" id="quest-4">
                    <strong>Quest V:</strong> Become a True Mage
                    <div style="font-size: 0.9em; color: #b8a8d8; margin-top: 5px;">Complete all previous quests to unlock your destiny</div>
                </li>
            </ul>
        </section>

        <section class="magic-section quest-content" style="display: none;">
            <h2>üîÆ Cast Your Spells</h2>
            <div class="spell-casting">
                <p>Choose a spell to cast and witness the magic unfold!</p>
                <div class="spell-buttons">
                    <button class="spell-btn" onclick="castSpell('fire')">üî• Fireball</button>
                    <button class="spell-btn" onclick="castSpell('ice')">‚ùÑÔ∏è Ice Blast</button>
                    <button class="spell-btn" onclick="castSpell('lightning')">‚ö° Lightning Strike</button>
                    <button class="spell-btn" onclick="castSpell('healing')">üíö Healing Light</button>
                </div>
                <div id="spell-result"></div>
            </div>
        </section>

        <section class="magic-section quest-content" style="display: none;">
            <h2>üíé Crystal Collector</h2>
            <div class="crystal-game">
                <p>Click the mystical crystals to collect them!</p>
                <div class="score">Crystals Collected: <span id="crystal-count">0</span></div>
                <div class="crystals-container" id="crystals"></div>
                <button class="spell-btn" onclick="resetCrystals()">Reset Crystals</button>
            </div>
        </section>

        <section class="magic-section quest-content" style="display: none;">
            <h2>üåÄ The Portal</h2>
            <p style="text-align: center;">Click the swirling portal to travel to distant realms...</p>
            <div class="portal" onclick="enterPortal()"></div>
            <div id="portal-message"></div>
        </section>

        <footer>
            <p>‚ú® May your journey through the Mystic Realm be filled with wonder ‚ú®</p>
            <p style="margin-top: 10px; font-size: 0.9em;">Created with magic and code</p>
        </footer>
    </div>

    <script>
        let gameState = {
            crystalCount: 0,
            spellsCast: 0,
            spellTypes: new Set(),
            portalVisits: 0,
            questsCompleted: [false, false, false, false, false]
        };

        const questStories = [
            {
                title: "‚ö° The First Spark",
                text: "As you master each element, you feel ancient power flowing through your veins. The Crystal Guardians whisper their approval. Fire, ice, lightning, and life‚Äîyou've proven yourself worthy of wielding their forces. But this is only the beginning..."
            },
            {
                title: "üíé Fragments of Power",
                text: "The crystals resonate in harmony, their combined energy revealing a vision: long ago, a great mage shattered the Eternal Crystal to prevent a dark force from claiming it. You've gathered enough fragments to sense its original power. The darkness stirs once more..."
            },
            {
                title: "üåÄ Between Worlds",
                text: "Each realm you visit leaves its mark upon your soul. You begin to understand‚Äîthese aren't mere destinations, but echoes of what this realm once was. The portals are weakening, the boundaries between worlds growing thin. Time is running short."
            },
            {
                title: "üî• Elemental Mastery",
                text: "Your connection to the elements deepens with each spell. You no longer merely cast magic‚Äîyou ARE magic. The realm responds to your presence, the very air shimmering with potential. The Crystal Guardians deem you ready for the final trial."
            },
            {
                title: "üëë The Prophecy Fulfilled",
                text: "As the final quest completes, brilliant light erupts from within you. The crystal fragments unite, reforming the Eternal Crystal in your hands. You understand now‚ÄîYOU are the guardian this realm has waited for. The darkness that once threatened to consume everything retreats before your radiance. Balance is restored, and the Mystic Realm flourishes once more. Your legend will be told for ages to come, brave mage. You are the realm's eternal protector, the one who answered destiny's call. Thank you for your courage. üåü"
            }
        ];

        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = Math.random() * 3 + 'px';
            star.style.height = star.style.width;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }

        function startJourney() {
            document.getElementById('intro-section').style.display = 'none';
            document.querySelectorAll('.quest-content').forEach(el => el.style.display = 'block');
            showStory("üó°Ô∏è Your Journey Begins", "The realm awakens to your presence. The quest board materializes before you, ancient runes glowing with purpose. Study your tasks carefully, young mage‚Äîeach completed quest will reveal another fragment of the realm's ancient mystery.");
        }

        function showStory(title, text) {
            document.getElementById('story-title').textContent = title;
            document.getElementById('story-text').textContent = text;
            document.getElementById('story-popup').style.display = 'block';
            document.getElementById('story-overlay').style.display = 'block';
            
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.textContent = ['‚ú®', '‚≠ê', 'üåü'][Math.floor(Math.random() * 3)];
                    particle.style.left = Math.random() * window.innerWidth + 'px';
                    particle.style.top = Math.random() * window.innerHeight + 'px';
                    particle.style.fontSize = Math.random() * 20 + 15 + 'px';
                    particle.style.color = '#ffd700';
                    document.body.appendChild(particle);
                    setTimeout(() => particle.remove(), 3000);
                }, i * 50);
            }
        }

        function closeStory() {
            document.getElementById('story-popup').style.display = 'none';
            document.getElementById('story-overlay').style.display = 'none';
        }

        function checkQuests() {
            if (!gameState.questsCompleted[0] && gameState.spellTypes.size >= 4) {
                completeQuest(0);
            }
            if (!gameState.questsCompleted[1] && gameState.crystalCount >= 10) {
                completeQuest(1);
            }
            if (!gameState.questsCompleted[2] && gameState.portalVisits >= 3) {
                completeQuest(2);
            }
            if (!gameState.questsCompleted[3] && gameState.spellsCast >= 20) {
                completeQuest(3);
            }
            if (!gameState.questsCompleted[4] && 
                gameState.questsCompleted[0] && 
                gameState.questsCompleted[1] && 
                gameState.questsCompleted[2] && 
                gameState.questsCompleted[3]) {
                completeQuest(4);
            }
        }

        function completeQuest(questIndex) {
            gameState.questsCompleted[questIndex] = true;
            const questElement = document.getElementById(`quest-${questIndex}`);
            questElement.classList.add('completed');
            
            const completed = gameState.questsCompleted.filter(q => q).length;
            document.getElementById('quest-progress').textContent = `${completed}/5`;

            setTimeout(() => {
                showStory(questStories[questIndex].title, questStories[questIndex].text);
            }, 800);
        }

        const spellMessages = {
            fire: [
                "üî• A mighty fireball erupts from your hands!",
                "üî• Flames dance around you, warming the realm!",
                "üî• Your fire magic burns bright and fierce!"
            ],
            ice: [
                "‚ùÑÔ∏è Icy crystals form in the air around you!",
                "‚ùÑÔ∏è A freezing blast chills the atmosphere!",
                "‚ùÑÔ∏è Winter's embrace flows through your magic!"
            ],
            lightning: [
                "‚ö° Thunder crashes as lightning strikes!",
                "‚ö° Electric energy crackles through the air!",
                "‚ö° The power of the storm courses through you!"
            ],
            healing: [
                "üíö A warm, soothing light envelops you!",
                "üíö Life energy flows through the realm!",
                "üíö Your healing magic brings peace and renewal!"
            ]
        };

        function castSpell(spellType) {
            gameState.spellsCast++;
            gameState.spellTypes.add(spellType);
            
            const messages = spellMessages[spellType];
            const message = messages[Math.floor(Math.random() * messages.length)];
            const resultDiv = document.getElementById('spell-result');
            
            resultDiv.style.animation = 'none';
            setTimeout(() => {
                resultDiv.textContent = message;
                resultDiv.style.animation = 'glow 1s ease-in-out 3';
            }, 10);

            createParticles(spellType);
            checkQuests();
        }

        function createParticles(type) {
            const colors = {
                fire: ['#ff4500', '#ff8c00', '#ffd700'],
                ice: ['#00ffff', '#87ceeb', '#ffffff'],
                lightning: ['#ffff00', '#ffffff', '#9370db'],
                healing: ['#00ff00', '#90ee90', '#98fb98']
            };

            const emojis = {
                fire: 'üî•',
                ice: '‚ùÑÔ∏è',
                lightning: '‚ö°',
                healing: 'üíö'
            };

            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.textContent = emojis[type];
                    particle.style.left = Math.random() * window.innerWidth + 'px';
                    particle.style.top = window.innerHeight - 100 + 'px';
                    particle.style.fontSize = Math.random() * 20 + 20 + 'px';
                    particle.style.color = colors[type][Math.floor(Math.random() * colors[type].length)];
                    document.body.appendChild(particle);

                    setTimeout(() => particle.remove(), 3000);
                }, i * 100);
            }
        }

        const crystalEmojis = ['üíé', 'üí†', 'üî∑', 'üîπ', 'üíô', 'üíú'];
        
        function createCrystals() {
            const container = document.getElementById('crystals');
            container.innerHTML = '';
            
            for (let i = 0; i < 12; i++) {
                const crystal = document.createElement('div');
                crystal.className = 'crystal';
                crystal.textContent = crystalEmojis[Math.floor(Math.random() * crystalEmojis.length)];
                crystal.style.color = `hsl(${Math.random() * 360}, 70%, 60%)`;
                crystal.onclick = function() {
                    collectCrystal(this);
                };
                container.appendChild(crystal);
            }
        }

        function collectCrystal(element) {
            gameState.crystalCount++;
            document.getElementById('crystal-count').textContent = gameState.crystalCount;
            
            element.style.transition = 'all 0.5s';
            element.style.transform = 'scale(2) translateY(-50px)';
            element.style.opacity = '0';
            
            setTimeout(() => {
                element.remove();
            }, 500);

            for (let i = 0; i < 5; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'particle';
                sparkle.textContent = '‚ú®';
                sparkle.style.left = element.offsetLeft + element.offsetWidth / 2 + 'px';
                sparkle.style.top = element.offsetTop + element.offsetHeight / 2 + 'px';
                sparkle.style.fontSize = '20px';
                document.body.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 3000);
            }

            checkQuests();
        }

        function resetCrystals() {
            createCrystals();
        }

        const realms = [
            "You've entered the Ethereal Forest! Ancient trees whisper secrets...",
            "Welcome to the Crystal Caverns! Gems glitter in every direction...",
            "You've arrived at the Floating Islands! Clouds drift beneath your feet...",
            "The Shadow Realm embraces you! Mysterious figures lurk in the darkness...",
            "You stand in the Temple of Light! Divine energy fills the air...",
            "The Dragon's Peak! A mighty roar echoes through the mountains...",
            "The Starfall Plains stretch before you! Meteorites paint the sky...",
            "You've found the Enchanted Library! Infinite knowledge awaits..."
        ];

        function enterPortal() {
            gameState.portalVisits++;
            const realm = realms[Math.floor(Math.random() * realms.length)];
            const messageDiv = document.getElementById('portal-message');
            
            messageDiv.textContent = realm;
            messageDiv.style.animation = 'glow 2s ease-in-out';
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.textContent = 'üåü';
                    particle.style.left = window.innerWidth / 2 + 'px';
                    particle.style.top = '50%';
                    particle.style.fontSize = Math.random() * 30 + 20 + 'px';
                    document.body.appendChild(particle);
                    setTimeout(() => particle.remove(), 3000);
                }, i * 50);
            }

            checkQuests();
        }

        createCrystals();
    </script>
</body>
</html>
